#!/bin/bash
# Run Swift commands without Nix SDK interference
DEVELOPER_DIR="$(xcode-select -p 2>/dev/null || echo /Applications/Xcode.app/Contents/Developer)"
exec env -i \
  HOME="$HOME" \
  USER="$USER" \
  PATH="/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/homebrew/bin" \
  DEVELOPER_DIR="$DEVELOPER_DIR" \
  ${PPQ_API_KEY:+PPQ_API_KEY="$PPQ_API_KEY"} \
  /usr/bin/swift "$@"
